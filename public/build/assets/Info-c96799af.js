import{r as h,bW as Je,bB as gt,$ as Z,s as Et,j as a,c as D,A as je,c1 as hn,o as ue,h as B,bD as mn,g as q,aP as Xe,b$ as gn,b_ as Rt,m as C,c2 as Se,c3 as pn,c4 as xe,c5 as ve,c6 as pt,c7 as xt,R as he,i as xn,a7 as Ne,ac as ze,b0 as Tt,b1 as Nt,aa as se,c8 as vn,c9 as bn,ca as et,cb as ie,cc as Le,cd as He,ce as pe,cf as be,cg as zt,e as ke,ch as $e,l as Me,ci as ce,cj as yn,ck as wn,cl as jn,cm as kn,cn as Cn,co as In,cp as Dn,K as $t,u as Mt,aY as Sn,bU as Ft,cq as Pn,an as Ot,ao as At,T as M,cr as En,ae as Ce,p as tt,Y as nt,B as J,D as Fe,t as st,x as rt,cs as Pe,bT as Rn,aE as Tn,bh as Nn,aX as Vt,ct as zn,a8 as Lt,ad as ae,cu as $n,J as le,w as Ht,y as W,cv as Mn,as as Bt,I as Oe,a3 as Fn,cw as On,a5 as Ut,a as _t,k as An,b as Ae,ak as Vn,S as Ln,H as at,_ as Hn,a2 as Bn,cx as Un,aW as _n,cy as Kn,cz as qn,aD as ot,bi as lt,cA as Wn,v as Yn,q as Xn,F as Gn,f as Qn,a1 as Kt,bJ as qt,cB as Zn,cC as Jn,bb as es}from"./main-742730cb.js";import{E as ts,C as ns}from"./Edit-b50aa211.js";const it=h.createContext(null);function ss(e=!1){h.useEffect(()=>(e?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[e])}function pa({children:e,leftSidenavStatus:n,onLeftSidenavChange:t,rightSidenavStatus:s,initialRightSidenavStatus:r,onRightSidenavChange:o,name:l,leftSidenavCanBeCompact:i,height:c="h-screen",className:d,gridClassName:u="dashboard-grid",blockBodyOverflow:f=!0,...m}){ss(!f);const g=Je("(max-width: 1024px)"),v=h.useMemo(()=>l?gt(`${l}.sidenav.compact`):!1,[l])?"compact":"open",[b,x]=Z(n,g?"closed":v,t),w=h.useMemo(()=>{if(g)return"closed";if(r!=null)return r;const y=gt(`${l}.sidenav.right.position`,"open");return y??(r||"closed")},[g,l,r]),[k,I]=Z(s,w,o),T=h.useCallback(y=>{I(y),Et(`${l}.sidenav.right.position`,y)},[I,l]),z=g&&(b==="open"||k==="open");return a.jsx(it.Provider,{value:{leftSidenavStatus:b,setLeftSidenavStatus:x,rightSidenavStatus:k,setRightSidenavStatus:T,leftSidenavCanBeCompact:i,name:l,isMobileMode:g},children:a.jsxs("div",{...m,className:D("relative isolate",u,d,c),children:[e,a.jsx(je,{children:z&&a.jsx(hn,{position:"fixed",onClick:()=>{x("closed"),T("closed")}},"dashboard-underlay")})]})})}function xa({children:e,isScrollable:n=!0}){return h.cloneElement(e,{className:D(e.props.className,n&&"overflow-y-auto stable-scrollbar","dashboard-grid-content")})}function va({className:e,position:n,children:t,size:s="md",mode:r,overlayPosition:o="fixed",display:l="flex",overflow:i="overflow-hidden",forceClosed:c=!1}){const{isMobileMode:d,leftSidenavStatus:u,setLeftSidenavStatus:f,rightSidenavStatus:m,setRightSidenavStatus:g}=h.useContext(it),p=n==="left"?u:m,v=d||r==="overlay",b={open:{display:l,width:null},compact:{display:l,width:null},closed:{width:0,transitionEnd:{display:"none"}}},x=rs(p==="compact"?"compact":s);return a.jsx(ue.div,{variants:b,initial:!1,animate:c?"closed":p,transition:{type:"tween",duration:.15},onClick:w=>{const k=w.target;d&&(k.closest("button")||k.closest("a"))&&(f("closed"),g("closed"))},className:D(e,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",i,x,v&&`${o} bottom-0 top-0 z-20 shadow-2xl`,v&&n==="left"&&"left-0",v&&n==="right"&&"right-0"),children:h.cloneElement(t,{className:D(t.props.className,"w-full h-full",p==="compact"&&"compact-scrollbar"),isCompactMode:p==="compact"})})}function rs(e){switch(e){case"compact":return"w-80";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return e||""}}const as=B(a.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function ba({children:e,className:n,hideToggleButton:t,...s}){const{isMobileMode:r,leftSidenavStatus:o,setLeftSidenavStatus:l,name:i,leftSidenavCanBeCompact:c}=h.useContext(it),d=c&&!r,u=!t&&(r||c),f=()=>{l(o==="open"?"closed":"open")},m=()=>{const g=o==="compact"?"open":"compact";Et(`${i}.sidenav.compact`,g==="compact"),l(g)};return a.jsx(mn,{className:D("dashboard-grid-navbar",n),border:"border-b",size:"sm",toggleButton:u?a.jsx(q,{size:"md",onClick:()=>{d?m():f()},children:a.jsx(as,{})}):void 0,...s,children:e})}var H=(e=>(e.Select="select",e.DateRangePicker="dateRangePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e.ChipField="chipField",e.Custom="custom",e))(H||{}),ye=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.hasAll="hasAll",e.doesntHave="doesntHave",e.between="between",e))(ye||{});function Wt(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function _(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function os(){var t,s,r;const e=(t=Xe())==null?void 0:t.settings.dates.default_timezone,n=((r=(s=Xe())==null?void 0:s.user)==null?void 0:r.timezone)||e||"auto";return!n||n==="auto"?gn():n}const A=Wt(Rt(os()));var St,Pt;const Be=((Pt=(St=Xe())==null?void 0:St.i18n)==null?void 0:Pt.language)||"en",ct=[{key:0,label:C("Today"),getRangeValue:()=>({preset:0,start:A,end:_(A)})},{key:1,label:C("Yesterday"),getRangeValue:()=>({preset:1,start:A.subtract({days:1}),end:_(A).subtract({days:1})})},{key:2,label:C("This week"),getRangeValue:()=>({preset:2,start:Se(A,Be),end:pn(_(A),Be)})},{key:3,label:C("Last week"),getRangeValue:()=>{const e=Se(A,Be).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:C("Last 7 days"),getRangeValue:()=>({preset:4,start:A.subtract({days:7}),end:_(A)})},{key:6,label:C("Last 30 days"),getRangeValue:()=>({preset:6,start:A.subtract({days:30}),end:_(A)})},{key:7,label:C("Last 3 months"),getRangeValue:()=>({preset:7,start:A.subtract({months:3}),end:_(A)})},{key:8,label:C("Last 12 months"),getRangeValue:()=>({preset:8,start:A.subtract({months:12}),end:_(A)})},{key:9,label:C("This month"),getRangeValue:()=>({preset:9,start:xe(A),end:ve(_(A))})},{key:10,label:C("This year"),getRangeValue:()=>({preset:10,start:pt(A),end:xt(_(A))})},{key:11,label:C("Last year"),getRangeValue:()=>({preset:11,start:pt(A).subtract({years:1}),end:xt(_(A)).subtract({years:1})})}],Yt=B(a.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Xt=he.forwardRef((e,n)=>{const{children:t,inputProps:s,wrapperProps:r,className:o,autoFocus:l,style:i,onClick:c}=e;return a.jsx("div",{...r,onClick:c,children:a.jsx("div",{...s,role:"group",className:D(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:n,style:i,children:a.jsx(xn,{autoFocus:l,children:t})})})}),ut=he.forwardRef(({inputRef:e,wrapperProps:n,children:t,onBlur:s,...r},o)=>{const l=Ne(r),i=ze(o),{fieldProps:c,inputProps:d}=Tt({...r,focusRef:i,labelElementType:"span"});return l.wrapper=D(l.wrapper,r.disabled&&"pointer-events-none"),a.jsx(Nt,{wrapperProps:se(n,{onBlur:u=>{i.current.contains(u.relatedTarget)||s==null||s(u)},onClick:()=>{const u=vn(i);u==null||u.focusFirst()}}),fieldClassNames:l,ref:i,...c,children:a.jsx(Xt,{inputProps:d,className:D(l.input,"gap-10"),ref:e,children:t})})});function ls(e){return e instanceof bn?"day":"minute"}function Ge(e,n,t){return n!=null&&e.compare(n)<0||t!=null&&e.compare(t)>0}function Gt(e,n){const t=et(),[s,r]=h.useState(!1),o=n.closeDialogOnSelection??!0,l=n.granularity||ls(e),i=n.min?ie(n.min,t):void 0,c=n.max?ie(n.max,t):void 0;return{timezone:t,granularity:l,min:i,max:c,calendarIsOpen:s,setCalendarIsOpen:r,closeDialogOnSelection:o}}function dt(){const e=et();return h.useMemo(()=>Rt(e),[e])}function is(e){var ne,G;const n=dt(),[t,s]=h.useState({start:(!e.value||!e.value.start)&&!((ne=e.defaultValue)!=null&&ne.start),end:(!e.value||!e.value.end)&&!((G=e.defaultValue)!=null&&G.end)}),r=e.onChange,[o,l]=Z(e.value?_e(e.value,n):void 0,e.value?void 0:_e(e.defaultValue,n),j=>{s({start:!1,end:!1}),r==null||r(j)}),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:f,setCalendarIsOpen:m,closeDialogOnSelection:g}=Gt(o.start,e),p=h.useCallback(()=>{s({start:!0,end:!0}),l(_e(null,n)),r==null||r(null),m(!1)},[n,l,r,m]),[v,b]=h.useState(null),[x,w]=h.useState(!1),[k,I]=h.useState(o),[T,z]=h.useState(()=>vt(o,c)),y=h.useCallback(j=>{let E=j.start,$=j.end;i&&(E=Le(E,i));const L=c?He(c,$):$;E=He(E,L);const re=i?Le(i,E):E;return $=Le($,re),c&&($=He($,c)),{start:ie(E,u),end:ie($,u)}},[i,c,u]),S=h.useCallback(j=>{const E={...y(j),preset:j.preset};l(E),I(E),z(vt(E,c)),s({start:!1,end:!1})},[l,y,c]),R=h.useCallback(j=>!t.start&&pe(j,k.start)||!t.end&&pe(j,k.end),[k,t]),O=h.useCallback(j=>(x||!t.start&&!t.end)&&j.compare(k.start)>=0&&j.compare(k.end)<=0,[k,t,x]),P=h.useCallback(j=>pe(j,k.start),[k]),N=h.useCallback(j=>pe(j,k.end),[k]),V=h.useCallback((j,E)=>({onPointerEnter:()=>{x&&E&&I(Ue({start:v,end:j,timezone:u}))},onClick:()=>{if(!x)w(!0),b(j),I(Ue({start:j,end:j,timezone:u}));else{const $=Ue({start:v,end:j,timezone:u});$.start=Wt($.start),$.end=_($.end),w(!1),b(null),S==null||S($),g&&(m==null||m(!1))}}}),[v,x,S,m,g,u]);return{selectedValue:o,setSelectedValue:S,calendarIsOpen:f,setCalendarIsOpen:m,dayIsActive:R,dayIsHighlighted:O,dayIsRangeStart:P,dayIsRangeEnd:N,getCellProps:V,calendarDates:T,setIsPlaceholder:s,isPlaceholder:t,clear:p,setCalendarDates:z,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:g}}function vt(e,n){let t=be(xe(e.start)),s=be(ve(e.end));return zt(t,s)&&(s=ve(s.add({months:1}))),n&&s.compare(n)>0&&(s=t,t=xe(t.subtract({months:1}))),[t,s]}function Ue(e){const n=ie(e.start,e.timezone),t=ie(e.end,e.timezone);return n.compare(t)>0?{start:t,end:n}:{start:n,end:t}}function _e(e,n){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:n,end:n.add({months:1})}}const Qt=B(a.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function cs(e,n,t,s){switch(n){case"era":case"year":case"month":case"day":return e.cycle(n,t,{round:n==="year"})}if("hour"in e)switch(n){case"dayPeriod":{const r=e.hour,o=r>=12;return e.set({hour:o?r-12:r+12})}case"hour":case"minute":case"second":return e.cycle(n,t,{round:n!=="hour",hourCycle:s.hour12?12:24})}return e}function us(e,n,t,s){switch(n){case"day":case"month":case"year":return e.set({[n]:t})}if("hour"in e)switch(n){case"dayPeriod":{const r=e.hour,o=r>=12;return t>=12===o?e:e.set({hour:o?r-12:r+12})}case"hour":if(s.hour12){const o=e.hour>=12;!o&&t===12&&(t=0),o&&t<12&&(t+=12)}case"minute":case"second":return e.set({[n]:t})}return e}const bt={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function ds({segment:e,domProps:n,value:t,onChange:s,isPlaceholder:r,state:{timezone:o,calendarIsOpen:l,setCalendarIsOpen:i}}){const c=ke(),d=h.useRef(""),{localeCode:u}=$e(),f=Me(),m=ce({timeZone:o}),g=h.useMemo(()=>new yn(u,{maximumFractionDigits:0}),[u]),p=y=>{s(us(t,e.type,y,m.resolvedOptions()))},v=y=>{s(cs(t,e.type,y,m.resolvedOptions()))},b=()=>{if(g.isValidPartialNumber(e.text)){const y=e.text.slice(0,-1),S=g.parse(y);if(y.length===0||S===0){const R=wn(o);e.type in R&&p(R[e.type])}else p(S);d.current=y}else e.type==="dayPeriod"&&v(-1)},x=y=>{var S;if(!(y.ctrlKey||y.metaKey||y.shiftKey||y.altKey)){switch(y.key){case"ArrowLeft":y.preventDefault(),y.stopPropagation(),f==null||f.focusPrevious();break;case"ArrowRight":y.preventDefault(),y.stopPropagation(),f==null||f.focusNext();break;case"Enter":(S=y.target.closest("form"))==null||S.requestSubmit(),i(!l);break;case"Tab":break;case"Backspace":case"Delete":{y.preventDefault(),y.stopPropagation(),b();break}case"ArrowUp":y.preventDefault(),d.current="",v(1);break;case"ArrowDown":y.preventDefault(),d.current="",v(-1);break;case"PageUp":y.preventDefault(),d.current="",v(bt[e.type]||1);break;case"PageDown":y.preventDefault(),d.current="",v(-(bt[e.type]||1));break;case"Home":y.preventDefault(),d.current="",p(e.maxValue);break;case"End":y.preventDefault(),d.current="",p(e.minValue);break}T(y.key)}},w=ce({hour:"numeric",hour12:!0}),k=h.useMemo(()=>{const y=new Date;return y.setHours(0),w.formatToParts(y).find(S=>S.type==="dayPeriod").value},[w]),I=h.useMemo(()=>{const y=new Date;return y.setHours(12),w.formatToParts(y).find(S=>S.type==="dayPeriod").value},[w]),T=y=>{const S=d.current+y;switch(e.type){case"dayPeriod":if(k.toLowerCase().startsWith(y))p(0);else if(I.toLowerCase().startsWith(y))p(12);else break;f==null||f.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!g.isValidPartialNumber(S))return;let R=g.parse(S),O=R,P=e.minValue===0;if(e.type==="hour"&&m.resolvedOptions().hour12){switch(m.resolvedOptions().hourCycle){case"h11":R>11&&(O=g.parse(y));break;case"h12":P=!1,R>12&&(O=g.parse(y));break}e.value>=12&&R>1&&(R+=12)}else R>e.maxValue&&(O=g.parse(y));if(Number.isNaN(R))return;const N=O!==0||P;N&&p(O),+`${R}0`>e.maxValue||S.length>=String(e.maxValue).length?(d.current="",N&&(f==null||f.focusNext())):d.current=S;break}}},z=c?{}:{"aria-label":e.type,"aria-valuetext":r?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":r?void 0:e.value,tabIndex:0,onKeyDown:x};return a.jsx("div",{...se(n,{...z,onFocus:y=>{d.current="",y.target.scrollIntoView({block:"nearest"})},onClick:y=>{y.preventDefault(),y.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function fs({segment:e,domProps:n}){const t=Me();return a.jsx("div",{...n,onPointerDown:s=>{s.pointerType==="mouse"&&(s.preventDefault(),t!=null&&t.focusNext({from:s.target})||t==null||t.focusPrevious({from:s.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function hs(e,n,t){switch(n){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:kn(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:jn(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(n){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(t.hour12){const s=e.hour>=12;return{value:e.hour,minValue:s?12:0,maxValue:s?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function we({segmentProps:e,state:n,value:t,onChange:s,isPlaceholder:r}){const{granularity:o}=n,l=h.useMemo(()=>{const u={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(u.hour="numeric",u.minute="numeric"),u},[o]),i=ce(l),c=h.useMemo(()=>t.toDate(),[t]),d=h.useMemo(()=>i.formatToParts(c).map(u=>{const f=hs(t,u.type,i.resolvedOptions()),m=r&&u.type!=="literal"?f.placeholder:u.value;return{type:u.type,text:u.value===", "?" ":m,...f,minLength:u.type!=="literal"?String(f.maxValue).length:1}}),[c,i,r,t]);return a.jsx("div",{className:"flex items-center",children:d.map((u,f)=>u.type==="literal"?a.jsx(fs,{domProps:e,segment:u},f):a.jsx(ds,{isPlaceholder:r,domProps:e,state:n,value:t,onChange:s,segment:u},f))})}const Zt=B(a.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function ms({date:e,currentMonth:n,state:{dayIsActive:t,dayIsHighlighted:s,dayIsRangeStart:r,dayIsRangeEnd:o,getCellProps:l,timezone:i,min:c,max:d}}){const{localeCode:u}=$e(),f=Cn(e,u),m=t(e),g=s(e),p=r(e),v=o(e),b=In(e,i),x=zt(e,n),w=Ge(e,c,d);return a.jsxs("div",{role:"button","aria-disabled":w,className:D("w-40 h-40 text-sm relative isolate flex-shrink-0",w&&"text-disabled pointer-events-none",!x&&"invisible pointer-events-none"),...l(e,x),children:[a.jsx("span",{className:D("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!m&&!b&&"hover:bg-hover",m&&"bg-primary text-on-primary font-semibold",b&&!m&&"bg-chip"),children:e.day}),g&&x&&a.jsx("span",{className:D("absolute w-full h-full inset-0 bg-primary/focus",(p||f===0||e.day===1)&&"rounded-l-full",(v||f===6||e.day===n.calendar.getDaysInMonth(n))&&"rounded-r-full")})]})}function gs({startDate:e,state:n,isFirst:t,isLast:s}){const{localeCode:r}=$e(),o=Dn(e,r),l=Se(e,r);return a.jsxs("div",{className:"w-280 flex-shrink-0",children:[a.jsx(ps,{isFirst:t,isLast:s,state:n,currentMonth:e}),a.jsxs("div",{className:"block",role:"grid",children:[a.jsx(xs,{state:n,startDate:e}),[...new Array(o).keys()].map(i=>a.jsx(ue.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(c=>a.jsx(ms,{date:l.add({weeks:i,days:c}),currentMonth:e,state:n},c))},i))]})]})}function ps({currentMonth:e,isFirst:n,isLast:t,state:{calendarDates:s,setCalendarDates:r,timezone:o,min:l,max:i}}){const c=m=>{const g=s.length;let p;m==="forward"?p=s.map(v=>ve(v.add({months:g}))):p=s.map(v=>ve(v.subtract({months:g}))),r(p)},d=ce({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),u=Ge(e.subtract({days:1}),l,i),f=Ge(xe(e.add({months:1})),l,i);return a.jsxs("div",{className:"flex items-center justify-between gap-10",children:[a.jsx(q,{size:"md",className:D("text-muted",!n&&"invisible"),disabled:!n||u,"aria-hidden":!n,onClick:()=>{c("backward")},children:a.jsx($t,{})}),a.jsx("div",{className:"text-sm font-semibold select-none",children:d.format(e.toDate(o))}),a.jsx(q,{size:"md",className:D("text-muted",!t&&"invisible"),disabled:!t||f,"aria-hidden":!t,onClick:()=>{c("forward")},children:a.jsx(Zt,{})})]})}function xs({state:{timezone:e},startDate:n}){const{localeCode:t}=$e(),s=ce({weekday:"short"}),r=Se(n,t);return a.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const i=r.add({days:o}).toDate(e),c=s.format(i);return a.jsx("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:a.jsx("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:c})},o)})})}function Jt({state:e,visibleMonths:n=1}){return ke()&&(n=1),a.jsx(h.Fragment,{children:[...new Array(n).keys()].map(s=>{const r=be(xe(e.calendarDates[s])),o=s===0,l=s===n-1;return a.jsx(gs,{state:e,startDate:r,isFirst:o,isLast:l},s)})})}const en=h.memo(({start:e,end:n,options:t,preset:s})=>{const{dates:r}=Mt(),o=et(),l=ce(t||Sn[s||(r==null?void 0:r.format)]);if(!e||!n)return null;let i;try{i=l.formatRange(yt(e,o),yt(n,o))}catch{i=""}return a.jsx(h.Fragment,{children:i})},Ft);function yt(e,n){return typeof e=="string"?Pn(e,n).toDate():"toDate"in e?e.toDate(n):e}function vs({onPresetSelected:e,selectedValue:n}){return a.jsx(Ot,{children:ct.map(t=>a.jsx(At,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(n==null?void 0:n.preset)===t.key,onSelected:()=>{const s=t.getRangeValue();e(s)},children:a.jsx(M,{...t.label})},t.key))})}function bs(e){return Je("(max-width: 1024px)",e)}const tn=he.forwardRef((e,n)=>{const{children:t,size:s="sm",description:r,className:o,invalid:l,autoFocus:i,errorMessage:c,iconRight:d,...u}=e,f=ze(n);En({autoFocus:i},f);const m=ys(s),g=Ne(e),p=h.useId();return a.jsxs("div",{className:D(o,"isolate"),children:[a.jsxs("label",{className:"flex select-none items-center",children:[a.jsx("input",{...u,type:"checkbox",role:"switch","aria-invalid":l||void 0,"aria-describedby":r?p:void 0,ref:f,"aria-checked":u.checked,className:D(m,!l&&"checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark",l&&"checked:border-danger checked:bg-danger","relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary","before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform","checked:before:border-white","focus-visible:ring",e.disabled&&"cursor-not-allowed opacity-80")}),t&&a.jsx("span",{className:D(g.size.font,"ml-12",l&&"text-danger",e.disabled&&"text-disabled"),children:t}),d]}),r&&!c&&a.jsx("div",{id:p,className:g.description,children:r}),c&&a.jsx("div",{id:p,className:g.error,children:c})]})});function ya(e){const{field:{onChange:n,onBlur:t,value:s=!1,ref:r},fieldState:{invalid:o,error:l}}=Ce({name:e.name}),i={onChange:c=>{c.target.value&&c.target.value!=="on"?n(c.target.checked?c.target.value:!1):n(c)},onBlur:t,checked:!!s,invalid:o,errorMessage:l==null?void 0:l.message,name:e.name};return a.jsx(tn,{ref:r,...se(e,i)})}function ys(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const ws=[{key:0,label:C("Preceding period"),getRangeValue:e=>{const n=e.start,r=(e.end.toDate().getTime()-n.toDate().getTime())/(1e3*60);return{preset:0,start:n.subtract({minutes:r}),end:n}}},{key:1,label:C("Same period last year"),getRangeValue:e=>({start:e.start.subtract({years:1}),end:e.end.subtract({years:1}),preset:1})},{key:2,label:C("Custom"),getRangeValue:e=>({start:e.start.subtract({weeks:1}),end:e.end.subtract({weeks:1}),preset:2})}];function js({originalRangeValue:e,onPresetSelected:n,selectedValue:t}){return a.jsx(Ot,{children:ws.map(s=>a.jsx(At,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===s.key,onSelected:()=>{const r=s.getRangeValue(e);n(r)},children:a.jsx(M,{...s.label})},s.key))})}function ks({state:e,compareState:n,showInlineDatePickerField:t=!1,compareVisibleDefault:s=!1}){const r=bs(),{close:o}=tt(),l=h.useRef(e),i=e.isPlaceholder.start||e.isPlaceholder.end,[c,d]=h.useState(s),u=a.jsxs(nt,{dividerTop:!0,startAction:!i&&!r?a.jsx("div",{className:"text-xs",children:a.jsx(en,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[a.jsx(J,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(l.current.selectedValue),e.setIsPlaceholder(l.current.isPlaceholder),o()},children:a.jsx(M,{message:"Cancel"})}),a.jsx(J,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const f=e.selectedValue;n&&c&&(f.compareStart=n.selectedValue.start,f.compareEnd=n.selectedValue.end),o(f)},children:a.jsx(M,{message:"Select"})})]});return a.jsxs(Fe,{size:"auto",children:[a.jsxs(st,{className:"flex",padding:"p-0",children:[!r&&a.jsxs("div",{className:"min-w-192 py-14",children:[a.jsx(vs,{selectedValue:e.selectedValue,onPresetSelected:f=>{e.setSelectedValue(f),e.closeDialogOnSelection&&o(f)}}),!!n&&a.jsxs(h.Fragment,{children:[a.jsx(tn,{className:"mx-20 mb-10 mt-14",checked:c,onChange:f=>d(f.target.checked),children:a.jsx(M,{message:"Compare"})}),c&&a.jsx(js,{originalRangeValue:e.selectedValue,selectedValue:n.selectedValue,onPresetSelected:f=>{n.setSelectedValue(f)}})]})]}),a.jsx(je,{initial:!1,children:a.jsx(Cs,{state:e,compareState:n,showInlineDatePickerField:t,compareVisible:c})})]}),!e.closeDialogOnSelection&&u]})}function Cs({state:e,compareState:n,showInlineDatePickerField:t,compareVisible:s}){return a.jsxs(ue.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[t&&a.jsxs("div",{children:[a.jsx(wt,{state:e}),!!n&&s&&a.jsx(wt,{state:n,label:a.jsx(M,{message:"Compare"})})]}),a.jsx("div",{className:"flex items-start gap-36",children:a.jsx(Jt,{state:e,visibleMonths:2})})]})}function wt({state:e,label:n}){const{selectedValue:t,setSelectedValue:s}=e;return a.jsxs(ut,{className:"mb-20 mt-10",label:n,children:[a.jsx(we,{state:e,value:t.start,onChange:r=>{s({...t,start:r})}}),a.jsx(Qt,{className:"block flex-shrink-0 text-muted",size:"md"}),a.jsx(we,{state:e,value:t.end,onChange:r=>{s({...t,end:r})}})]})}function Is(e){var m,g;const{granularity:n,closeDialogOnSelection:t,...s}=e,r=is(e),o=h.useRef(null),i=ke()&&n!=="day",c=a.jsx(rt,{offset:8,placement:"bottom-start",isOpen:r.calendarIsOpen,onOpenChange:r.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:a.jsx(ks,{state:r})}),d={onClick:p=>{p.stopPropagation(),p.preventDefault(),Ds(p)?r.setCalendarIsOpen(!1):r.setCalendarIsOpen(!0)}},u=r.selectedValue,f=r.setSelectedValue;return a.jsxs(h.Fragment,{children:[a.jsxs(ut,{ref:o,wrapperProps:d,endAdornment:i?void 0:a.jsx(Yt,{}),...s,children:[a.jsx(we,{isPlaceholder:(m=r.isPlaceholder)==null?void 0:m.start,state:r,segmentProps:d,value:u.start,onChange:p=>{f({start:p,end:u.end})}}),a.jsx(Qt,{className:"block flex-shrink-0 text-muted",size:"md"}),a.jsx(we,{isPlaceholder:(g=r.isPlaceholder)==null?void 0:g.end,state:r,segmentProps:d,value:u.end,onChange:p=>{f({start:u.start,end:p})}})]}),c]})}function Ds(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function Ss(e){const{field:{onChange:n,onBlur:t,value:s,ref:r},fieldState:{invalid:o,error:l}}=Ce({name:e.name}),i={onChange:c=>{n(c?nn(c):null)},onBlur:t,value:Ps(s),invalid:o,errorMessage:l==null?void 0:l.message,inputRef:r};return a.jsx(Is,{...se(i,e)})}function Ps(e){const{start:n,end:t,preset:s}=e||{},r={preset:s};try{n&&(r.start=typeof n=="string"?Pe(n):n),t&&(r.end=typeof t=="string"?Pe(t):t)}catch{}return r}function nn({start:e,end:n,preset:t}={}){const s={preset:t};return e&&(s.start=e.toAbsoluteString()),n&&(s.end=n.toAbsoluteString()),s}function sn(e){var n;return{...e,defaultOperator:ye.between,control:{type:H.DateRangePicker,defaultValue:((n=e.control)==null?void 0:n.defaultValue)||nn(ct[3].getRangeValue())}}}function Es(e){return sn({key:"created_at",label:C("Date created"),...e})}function Rs(e){return sn({key:"updated_at",label:C("Last updated"),...e})}const Ke="filters";function Ts(e){if(!e)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(e))),n.map(t=>(t.valueKey!=null&&(t.value=t.valueKey),t))}catch{}return n}function Ns(e,n){return!e||(e=n?e.filter(t=>t.value!=="").map(t=>zs(t,n)):e,e=e.filter(t=>!t.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function zs(e,n){var s;const t=n.find(r=>r.key===e.key);if((t==null?void 0:t.control.type)==="select"){const r=(t.control.options||[]).find(o=>o.key===e.value);if(r)return{...e,value:r.value,valueKey:r.key}}return(s=t==null?void 0:t.extraFilters)!=null&&s.length&&(e.extraFilters=t.extraFilters),e}function $s(e,n){const[t]=Rn(),s=Tn(),r=t.get(Ke),o=h.useMemo(()=>{if(!e)return[];const u=Ts(r);return(n||[]).forEach(f=>{if(!u.find(m=>m.key===f)){const m=e.find(g=>g.key===f);u.push({key:f,value:m.control.defaultValue,operator:m.defaultOperator,isInactive:!0})}}),u.sort((f,m)=>e.findIndex(g=>g.key===f.key)-e.findIndex(g=>g.key===m.key)),u},[r,n,e]),l=h.useCallback(u=>{const f=[...o];return u.forEach(m=>{const g=typeof m=="object"?m.key:m,p=f.findIndex(v=>v.key===g);p>-1&&f.splice(p,1)}),f},[o]),i=h.useCallback(u=>{const f=Ns(u,e);f?t.set(Ke,f):t.delete(Ke),s({search:`?${t}`},{replace:!0})},[e,s,t]),c=h.useCallback(u=>{const m=[...l(u),...u];i(m)},[l,i]),d=h.useCallback(u=>i(l([u])),[l,i]);return{add:c,remove:d,replaceAll:i,decodedFilters:o,encodedFilters:r}}function Ee(e){return Nn()?e.metaKey:e.ctrlKey}function Ms(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:r=>{switch(r.key){case"ArrowLeft":Y(r,{cell:{op:"decrement"}},e);break;case"ArrowRight":Y(r,{cell:{op:"increment"}},e);break;case"ArrowUp":Y(r,{row:{op:"decrement"}},e);break;case"ArrowDown":Y(r,{row:{op:"increment"}},e);break;case"PageUp":Y(r,{row:{op:"decrement",count:5}},e);break;case"PageDown":Y(r,{row:{op:"increment",count:5}},e);break;case"Tab":Fs(r);break;case"Home":Ee(r)?Y(r,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):Y(r,{cell:{op:"decrement",count:n}},e);break;case"End":Ee(r)?Y(r,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):Y(r,{cell:{op:"increment",count:n}},e);break}}}}function Y(e,n,{cellCount:t,rowCount:s}){var p,v,b,x,w,k,I;if(((p=document.activeElement)==null?void 0:p.tagName)==="input")return;e.preventDefault();const r=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!r)return;const l=o.closest("[aria-rowindex]");if(!l)return;let i=parseInt(l.getAttribute("aria-rowindex")),c=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(c))return;const d=((v=n.row)==null?void 0:v.count)??1;((b=n.row)==null?void 0:b.op)==="increment"?i=Math.min(s,i+d):((x=n.row)==null?void 0:x.op)==="decrement"&&(i=Math.max(1,i-d));const u=((w=n.cell)==null?void 0:w.count)??1;((k=n.cell)==null?void 0:k.op)==="increment"?c=Math.min(t,c+u):((I=n.cell)==null?void 0:I.op)==="decrement"&&(c=Math.max(1,c-u));const f=r.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${c}"]`);if(!f)return;const g=Vt(f).nextNode()||f;o.setAttribute("tabindex","-1"),g.setAttribute("tabindex","0"),g.focus()}function Fs(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=Vt(n,{tabbable:!0});let s,r;do r=t.lastChild(),r&&(s=r);while(r);s&&!s.contains(document.activeElement)&&zn(s)}}const X=h.createContext(null);function rn({index:e,isHeader:n}){const{columns:t,cellHeight:s="h-46",headerCellHeight:r="h-46"}=h.useContext(X),o=t[e],l=o==null?void 0:o.padding;let i="justify-start";return(o==null?void 0:o.align)==="center"?i="justify-center":(o==null?void 0:o.align)==="end"&&(i="justify-end"),D("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?r:s,(o==null?void 0:o.width)??"flex-1",o==null?void 0:o.maxWidth,o==null?void 0:o.minWidth,i,l,o==null?void 0:o.className)}function Os({rowIndex:e,rowIsHovered:n,index:t,item:s,id:r}){const{columns:o}=h.useContext(X),l=o[t],i=h.useMemo(()=>({index:e,isHovered:n,isPlaceholder:s.isPlaceholder}),[e,n,s.isPlaceholder]),c=rn({index:t,isHeader:!1});return a.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:r,className:c,children:a.jsx("div",{className:"overflow-x-hidden overflow-ellipsis min-w-0 w-full",children:l.body(s,i)})})}function As({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:s=0,preventDefault:r,stopPropagation:o=!0,onPress:l,onLongPress:i,...c}){const u=h.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:f,removeGlobalListener:m}=Lt(),g=x=>{!u.el||(e==null?void 0:e(x,u.el))===!1||(u.originalTouchAction=u.el.style.touchAction,u.el.style.touchAction="none",u.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",u.started=!0)},p=x=>{var w;if(x.button===0&&u.id==null){if(u.started=!1,((w=c.onPointerDown)==null?void 0:w.call(c,x))===!1)return;o&&x.stopPropagation(),r&&x.preventDefault(),u.id=x.pointerId,u.el=x.currentTarget,u.lastPosition={x:x.clientX,y:x.clientY},i&&(u.longPressTimer=setTimeout(()=>{i(x,u.el),u.longPressTriggered=!0},400)),(e||n)&&f(window,"pointermove",v,!1),f(window,"pointerup",b,!1),f(window,"pointercancel",b,!1)}},v=x=>{if(x.pointerId===u.id){const w=x.clientX-u.lastPosition.x,k=x.clientY-u.lastPosition.y;(Math.abs(w)>=s||Math.abs(k)>=s)&&!u.started&&g(x),u.started&&(n==null||n(x,w,k),u.lastPosition={x:x.clientX,y:x.clientY})}},b=x=>{var w;if(x.pointerId===u.id){u.longPressTimer&&clearTimeout(u.longPressTimer);const k=u.longPressTriggered;u.longPressTriggered=!1,u.started&&(t==null||t(x)),u.el&&(x.type!=="pointercancel"&&((w=c.onPointerUp)==null||w.call(c,x,u.el),x.target&&u.el.contains(x.target)&&(k?i==null||i(x,u.el):l==null||l(x,u.el))),document.documentElement.style.userSelect=u.originalUserSelect||"",u.el.style.touchAction=u.originalTouchAction||""),u.id=void 0,u.started=!1,m(window,"pointermove",v,!1),m(window,"pointerup",b,!1),m(window,"pointercancel",b,!1)}};return{domProps:{onPointerDown:ae(p)}}}function Vs(e){return e.shiftKey||Ee(e)}function Ls({index:e,isSelected:n,isHeader:t}){const s=$n(),r=ke(),{hideBorder:o,enableSelection:l,collapseOnMobile:i,onAction:c}=h.useContext(X);return D("flex gap-x-16 break-inside-avoid outline-none border border-transparent",c&&"cursor-pointer",r&&i&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&e===0&&"border-t-divider",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&(l||c)&&"focus-visible:bg-focus hover:bg-hover")}const Hs=["button","a","input","select","textarea"];function Bs({item:e,index:n,renderAs:t,className:s,style:r}){const{selectedRows:o,columns:l,toggleRow:i,selectRow:c,onAction:d,selectRowOnContextMenu:u,enableSelection:f,selectionStyle:m,hideHeaderRow:g}=h.useContext(X),p=h.useRef(!1),v=o.includes(e.id),[b,x]=h.useState(!1),w=P=>P.target.closest(Hs.join(",")),k=P=>{m==="highlight"&&d&&!p.current&&!w(P)&&(P.preventDefault(),P.stopPropagation(),d(e,n))},I=!!o.length,T=P=>{w(P)||(m==="checkbox"?f&&(I||!d)?i(e):d&&d(e,n):m==="highlight"&&(p.current?f&&I?i(e):d==null||d(e,n):f&&c(e,Vs(P))))},{domProps:z}=As({onPointerDown:P=>{p.current=P.pointerType==="touch"},onPress:T,onLongPress:f?()=>{p.current&&i(e)}:void 0}),y=P=>{f&&P.key===" "?(P.preventDefault(),P.stopPropagation(),m==="checkbox"?i(e):c(e)):P.key==="Enter"&&!o.length&&d&&(P.preventDefault(),P.stopPropagation(),d(e,n))},S=P=>{u&&f&&(o.includes(e.id)||c(e)),p.current&&(P.preventDefault(),P.stopPropagation())},R=Ls({index:n,isSelected:v}),O=t||"div";return a.jsx(O,{role:"row","aria-rowindex":n+1+(g?0:1),"aria-selected":v,tabIndex:-1,className:D(s,R),item:O==="div"?void 0:e,onDoubleClick:ae(k),onKeyDown:ae(y),onContextMenu:ae(S),onPointerEnter:ae(()=>x(!0)),onPointerLeave:ae(()=>x(!1)),style:r,...z,children:l.map((P,N)=>a.jsx(Os,{rowIndex:n,rowIsHovered:b,index:N,item:e},`${e.id}-${P.key}`))})}const Us={key:"checkbox",header:()=>a.jsx(Ks,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?a.jsx(le,{size:"w-24 h-24",variant:"rect"}):a.jsx(_s,{item:e})};function _s({item:e}){const{selectedRows:n,toggleRow:t}=h.useContext(X);return a.jsx(Ht,{checked:n.includes(e.id),onChange:()=>t(e)})}function Ks(){const{trans:e}=W(),{data:n,selectedRows:t,onSelectionChange:s}=h.useContext(X),r=!!n.length&&n.length===t.length,o=!r&&!!t.length;return a.jsx(Ht,{"aria-label":e({message:"Select all"}),isIndeterminate:o,checked:r,onChange:()=>{s(r?[]:n.map(l=>l.id))}})}const qs=B(a.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Ws({index:e}){const{columns:n,sortDescriptor:t,onSortChange:s,enableSorting:r}=h.useContext(X),o=n[e],l=rn({index:e,isHeader:!0}),[i,c]=h.useState(!1),d=o.sortingKey||o.key,u=o.allowsSorting&&r,{orderBy:f,orderDir:m}=t||{},g=u&&f===d;let p;g&&m==="asc"?p="ascending":g&&m==="desc"?p="descending":u&&(p="none");const v=()=>{if(!u)return;let w;g&&m==="desc"?w={orderDir:"asc",orderBy:d}:g&&m==="asc"?w={orderBy:void 0,orderDir:void 0}:w={orderDir:"desc",orderBy:d},s==null||s(w)},b=g||i,x={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return a.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":p,className:D(l,"text-muted font-medium text-xs",u&&"cursor-pointer"),onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onKeyDown:w=>{(w.key===" "||w.key==="Enter")&&(w.preventDefault(),v())},onClick:v,children:[o.hideHeader?a.jsx("div",{className:"sr-only",children:o.header()}):o.header(),a.jsx(je,{children:u&&a.jsx(ue.span,{variants:x,animate:b?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!b,children:a.jsx(qs,{size:"xs",className:D("text-muted",m==="asc"&&f===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Ys(){const{columns:e}=h.useContext(X);return a.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>a.jsx(Ws,{index:t},n.key))})}function wa({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:s=!1,hideBorder:r=!1,data:o,selectedRows:l,defaultSelectedRows:i,onSelectionChange:c,sortDescriptor:d,onSortChange:u,enableSorting:f=!0,onDelete:m,enableSelection:g=!0,selectionStyle:p="checkbox",ariaLabelledBy:v,selectRowOnContextMenu:b,onAction:x,renderRowAs:w,tableBody:k,meta:I,tableRef:T,closeOnInteractOutside:z=!1,cellHeight:y,headerCellHeight:S,...R}){const O=ke(),P=!!O&&t;P&&(s=!0,r=!0);const[N,V]=Z(l,i||[],c),[ne,G]=Z(d,void 0,u),j=h.useCallback(F=>{const U=[...N];if(!U.includes(F.id))U.push(F.id);else{const de=U.indexOf(F.id);U.splice(de,1)}V(U)},[N,V]),E=h.useCallback((F,U)=>{let de=[];F&&(de=U?[...N==null?void 0:N.filter(me=>me!==F.id),F.id]:[F.id]),V(de)},[N,V]),$=h.useMemo(()=>{const F=n.filter(de=>{const me=de.visibleInMode||"regular";if(me==="all"||me==="compact"&&P||me==="regular"&&!P)return!0});return g&&p!=="highlight"&&!O&&F.unshift(Us),F},[O,n,g,p,P]),L={isCollapsedMode:P,cellHeight:y,headerCellHeight:S,hideBorder:r,hideHeaderRow:s,selectedRows:N,onSelectionChange:V,enableSorting:f,enableSelection:g,selectionStyle:p,data:o,columns:$,sortDescriptor:ne,onSortChange:G,toggleRow:j,selectRow:E,onAction:x,selectRowOnContextMenu:b,meta:I,collapseOnMobile:t},re=Ms({cellCount:g?$.length+1:$.length,rowCount:o.length+1}),ht={renderRowAs:w};k?k=h.cloneElement(k,ht):k=a.jsx(Xs,{...ht});const mt=ze(T);return Mn({ref:mt,onInteractOutside:F=>{z&&g&&(N!=null&&N.length)&&!F.target.closest('[role="dialog"]')&&V([])}}),a.jsx(X.Provider,{value:L,children:a.jsxs("div",{...se(R,re,{onKeyDown:F=>{F.key==="Escape"?(F.preventDefault(),F.stopPropagation(),N!=null&&N.length&&V([])):F.key==="Delete"?(F.preventDefault(),F.stopPropagation(),N!=null&&N.length&&(m==null||m(o.filter(U=>N==null?void 0:N.includes(U.id))))):Ee(F)&&F.key==="a"&&(F.preventDefault(),F.stopPropagation(),g&&V(o.map(U=>U.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":$.length+1,ref:mt,"aria-multiselectable":g?!0:void 0,"aria-labelledby":v,className:D(e,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!s&&a.jsx(Ys,{}),k]})})}function Xs({renderRowAs:e}){const{data:n}=h.useContext(X);return a.jsx(h.Fragment,{children:n.map((t,s)=>a.jsx(Bs,{item:t,index:s,renderAs:e},t.id))})}function Gs({filter:e}){const{trans:n}=W();return a.jsx(Bt,{size:"sm",name:`${e.key}.value`,selectionMode:"single",showSearchField:e.control.showSearchField,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,searchPlaceholder:e.control.searchPlaceholder?n(e.control.searchPlaceholder):void 0,children:e.control.options.map(t=>a.jsx(Oe,{value:t.key,children:a.jsx(M,{...t.label})},t.key))})}function Qs({filter:e}){return a.jsx(Ss,{min:e.control.min,max:e.control.max,size:"sm",name:`${e.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const Ve=h.forwardRef(({className:e,circle:n,size:t="md",src:s,link:r,label:o,fallback:l="generic",lazy:i=!0,...c},d)=>{let u=s?a.jsx("img",{ref:d,src:s,alt:o,loading:i?"lazy":void 0,className:"block h-full w-full object-cover"}):a.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:a.jsx(On,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});o&&(u=a.jsx(Ut,{label:o,children:u}));const f={...c,className:D(e,"relative block overflow-hidden select-none flex-shrink-0",Zs(t),n?"rounded-full":"rounded")};return r?a.jsx(Fn,{...f,to:r,children:u}):a.jsx("div",{...f,children:u})});function Zs(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}function Js(e,n,t){return _t({queryKey:[e,n],queryFn:()=>er(e,n),placeholderData:An,...t})}async function er(e,n){return Ae.get(e,{params:n}).then(t=>t.data)}function an(e,n,t){return _t({queryKey:[e,n],queryFn:()=>tr(e,n),...t})}async function tr(e,n){return Ae.get(e,{params:n}).then(t=>t.data)}function nr({label:e,className:n,background:t,value:s,defaultValue:r="",placeholder:o=C("Select item..."),searchPlaceholder:l=C("Find an item..."),onChange:i,description:c,errorMessage:d,invalid:u,autoFocus:f,queryParams:m,endpoint:g,disabled:p,required:v}){var S;const b=h.useRef(null),[x,w]=h.useState(""),[k,I]=Z(s,r,i),T=Js(g,{query:x,...m}),{trans:z}=W(),y=Ne({size:"md"});return k?a.jsxs("div",{className:n,children:[a.jsx("div",{className:y.label,children:e}),a.jsx("div",{className:D("rounded-input border p-8",t,u&&"border-danger"),children:a.jsx(je,{initial:!1,mode:"wait",children:a.jsx(sr,{disabled:p,endpoint:g,modelId:k,queryParams:m,onEditClick:()=>{I(""),w(""),requestAnimationFrame(()=>{var R,O;(R=b.current)==null||R.focus(),(O=b.current)==null||O.click()})}})})}),c&&!d&&a.jsx("div",{className:y.description,children:c}),d&&a.jsx("div",{className:y.error,children:d})]}):a.jsx(Ln,{className:n,showSearchField:!0,invalid:u,errorMessage:d,description:c,color:"white",isAsync:!0,background:t,placeholder:z(o),searchPlaceholder:z(l),label:e,isLoading:T.isFetching,items:(S=T.data)==null?void 0:S.results,inputValue:x,onInputValueChange:w,selectionMode:"single",selectedValue:k,onSelectionChange:I,ref:b,autoFocus:f,disabled:p,required:v,children:R=>a.jsx(Oe,{value:R.id,description:R.description,startIcon:a.jsx(Ve,{src:R.image}),children:R.name},R.id)})}function sr({modelId:e,onEditClick:n,endpoint:t,disabled:s,queryParams:r}){const{data:o,isLoading:l}=an(`${t}/${e}`,r);return l||!(o!=null&&o.model)?a.jsx(rr,{},"skeleton"):a.jsxs(ue.div,{className:D("flex items-center gap-10",s&&"pointer-events-none cursor-not-allowed text-disabled"),...at,children:[o.model.image&&a.jsx(Ve,{src:o.model.image}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm leading-4",children:o.model.name}),a.jsx("div",{className:"text-xs text-muted",children:o.model.description})]}),a.jsx(Ut,{label:a.jsx(M,{message:"Change item"}),children:a.jsx(q,{className:"ml-auto text-muted",size:"sm",onClick:n,disabled:s,children:a.jsx(ts,{})})})]},"preview")}function rr(){return a.jsxs(ue.div,{className:"flex items-center gap-10",...at,children:[a.jsx(le,{variant:"rect",size:"w-32 h-32"}),a.jsxs("div",{className:"max-h-[36px] flex-auto",children:[a.jsx(le,{className:"text-xs"}),a.jsx(le,{className:"max-h-8 text-xs"})]}),a.jsx(le,{variant:"icon",size:"w-24 h-24"})]})}function ar({name:e,...n}){const{clearErrors:t}=Vn(),{field:{onChange:s,value:r=""},fieldState:{invalid:o,error:l}}=Ce({name:e});return a.jsx(nr,{value:r,onChange:i=>{s(i),t(e)},invalid:o,errorMessage:l==null?void 0:l.message,...n})}function or({filter:e}){return a.jsx(ar,{name:`${e.key}.value`,endpoint:`normalized-models/${e.control.model}`})}const on={"=":C("is"),"!=":C("is not"),">":C("is greater than"),">=":C("is greater than or equal to"),"<":C("is less than"),"<=":C("is less than or equal to"),has:C("Include"),doesntHave:C("Do not include"),between:C("Is between"),hasAll:C("Include all")};function lr({filter:e}){var t;const n=e.control;return a.jsxs(h.Fragment,{children:[a.jsx(Bt,{selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:(t=e.operators)==null?void 0:t.map(s=>a.jsx(Oe,{value:s,children:a.jsx(M,{...on[s]})},s))}),a.jsx(Hn,{size:"sm",name:`${e.key}.value`,type:e.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0,required:!0})]})}function ir({className:e,children:n,size:t,color:s,radius:r,selectable:o,wrap:l=!0}){return a.jsx("div",{className:D("flex items-center gap-8",l&&"flex-wrap",e),children:h.Children.map(n,i=>{if(h.isValidElement(i))return h.cloneElement(i,{size:t,color:s,selectable:o,radius:r})})})}function Qe(e){return{id:e,name:`${e}`,description:`${e}`}}function cr(e,n){const t=h.useRef(null),s=ze(n),{displayWith:r=L=>L.name,validateWith:o,children:l,suggestions:i,isLoading:c,inputValue:d,onInputValueChange:u,onItemSelected:f,placeholder:m,onOpenChange:g,chipSize:p="sm",openMenuOnFocus:v=!0,showEmptyMessage:b,value:x,defaultValue:w,onChange:k,valueKey:I,isAsync:T,allowCustomValue:z=!0,showDropdownArrow:y,onChipClick:S,...R}=e,O=Ne({...e,flexibleHeight:!0}),[P,N]=fr(e),[V,ne]=h.useState(!1),G=a.jsx(ot,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),j=y?a.jsx(lt,{}):null,{fieldProps:E,inputProps:$}=Tt({...R,focusRef:s,endAdornment:c&&V?G:j});return a.jsx(Nt,{fieldClassNames:O,...E,children:a.jsxs(Xt,{ref:t,className:D("flex flex-wrap items-center",O.input),onClick:()=>{var L;(L=s.current)==null||L.focus()},children:[a.jsx(ur,{displayChipUsing:r,onChipClick:S,items:P,setItems:N,chipSize:p}),a.jsx(dr,{size:e.size,showEmptyMessage:b,inputProps:$,inputValue:d,onInputValueChange:u,fieldRef:t,inputRef:s,chips:P,setChips:N,validateWith:o,isLoading:c,suggestions:i,placeholder:m,openMenuOnFocus:v,listboxIsOpen:V,setListboxIsOpen:ne,allowCustomValue:z,children:l})]})})}function ur({items:e,setItems:n,displayChipUsing:t,chipSize:s,onChipClick:r}){const o=Me(),l=h.useCallback(i=>{const c=e.findIndex(u=>u.id===i),d=[...e];return c>-1&&(d.splice(c,1),n(d)),d},[e,n]);return a.jsx(ir,{className:D("max-w-full flex-shrink-0 flex-wrap",s==="xs"?"my-6":"my-8"),size:s,selectable:!0,children:e.map(i=>a.jsx(Bn,{errorMessage:i.errorMessage,adornment:i.image?a.jsx(Ve,{circle:!0,src:i.image}):null,onClick:()=>r==null?void 0:r(i),onRemove:()=>{l(i.id).length?o==null||o.focusPrevious({tabbable:!0}):o==null||o.focusLast()},children:t(i)},i.id))})}function dr(e){const{inputRef:n,fieldRef:t,validateWith:s,setChips:r,chips:o,suggestions:l,inputProps:i,placeholder:c,openMenuOnFocus:d,listboxIsOpen:u,setListboxIsOpen:f,allowCustomValue:m,isLoading:g,size:p}=e,v=Me(),b=h.useCallback(j=>{j=(j||[]).filter(E=>{const $=!E||!E.id||!E.name;return!(o.findIndex(re=>re.id===(E==null?void 0:E.id))>-1)&&!$}),j.length&&(s&&(j=j.map(E=>s(E))),r([...o,...j]))},[o,r,s]),x=Un({...e,clearInputOnItemSelection:!0,isOpen:u,onOpenChange:f,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:j=>{N(j)}}),{state:{activeIndex:w,setActiveIndex:k,isOpen:I,setIsOpen:T,inputValue:z,setInputValue:y},refs:S,listboxId:R,collection:O,onInputChange:P}=x,N=j=>{const E=O.size&&w!=null?[...O.values()][w]:null;E!=null&&E.item?b([E.item]):m&&b([Qe(E?E.value:j)]),y(""),k(null),T(!1)};_n(()=>{t.current&&S.reference.current!==t.current&&x.reference(t.current)},[t,x,S]);const{handleTriggerKeyDown:V,handleListboxKeyboardNavigation:ne}=Wn(x),G=ae(()=>{d&&!I&&T(!0)});return a.jsx(Kn,{listbox:x,mobileOverlay:qn,isLoading:g,onPointerDown:j=>{j.preventDefault()},children:a.jsx("input",{type:"text",className:D("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",p==="xs"?"h-20":"h-30"),placeholder:c,...se(i,{ref:n,value:z,onChange:P,onPaste:j=>{const $=j.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if($){j.preventDefault();const L=window.getSelection();L!=null&&L.rangeCount&&(L.deleteFromDocument(),b($.map(re=>Qe(re))))}},"aria-autocomplete":"list","aria-controls":I?R:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:j=>{const E=j.target;if(j.key==="Enter"){j.preventDefault(),N(E.value);return}if(j.key==="Escape"&&I&&(T(!1),y("")),j.key==="ArrowUp"&&I&&(w===0||w==null)){k(null);return}if(w!=null&&(j.key==="ArrowLeft"||j.key==="ArrowRight")){j.preventDefault();return}if((j.key==="ArrowLeft"||j.key==="Backspace"||j.key==="Delete")&&E.selectionStart===0&&w==null&&o.length){v==null||v.focusPrevious({tabbable:!0});return}V(j)||ne(j)},onFocus:G,onClick:G})})})}function fr({onChange:e,value:n,defaultValue:t,valueKey:s}){const r=h.useMemo(()=>jt(n),[n]),o=h.useMemo(()=>jt(t),[t]),l=h.useCallback(i=>{const c=s?i.map(d=>d[s]):i;e==null||e(c)},[e,s]);return Z(r||void 0,o||[],l)}function jt(e){if(e!=null)return e.map(n=>typeof n!="object"?Qe(n):n)}const hr=he.forwardRef(cr);function mr({children:e,...n}){const{field:{onChange:t,onBlur:s,value:r=[],ref:o},fieldState:{invalid:l,error:i}}=Ce({name:n.name}),c={onChange:t,onBlur:s,value:r,invalid:l,errorMessage:i==null?void 0:i.message};return a.jsx(hr,{ref:o,...se(c,n),children:e})}function gr({filter:e}){const{trans:n}=W();return a.jsx(mr,{size:"sm",name:`${e.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,displayWith:t=>{var s;return(s=e.control.options.find(r=>r.key===t.id))==null?void 0:s.label.message},suggestions:e.control.options.map(t=>({id:t.key,name:t.label.message})),children:t=>a.jsx(Oe,{value:t.id,children:a.jsx(M,{message:t.name})},t.id)})}const ln=h.forwardRef((e,n)=>{const{isInactive:t,filter:s,...r}=e;return t?a.jsx(pr,{filter:s,...r,ref:n}):a.jsx(xr,{filter:s,...r,ref:n})}),pr=h.forwardRef(({filter:e,...n},t)=>a.jsx(J,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:t,endIcon:a.jsx(lt,{}),...n,children:a.jsx(M,{...e.label})})),xr=h.forwardRef(({filter:e,children:n,...t},s)=>{const r=e.control.type===H.BooleanToggle;return a.jsxs(J,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!r&&a.jsx(lt,{}),ref:s,...t,children:[a.jsx("span",{className:D(!r&&"border-r border-r-primary-light mr-8 pr-8"),children:a.jsx(M,{...e.label})}),n]})});function Ie(e){const{onValueChange:n,isInactive:t,filter:s,label:r}=e;return a.jsxs(rt,{offset:10,type:"popover",onClose:o=>{o!==void 0&&n(o)},children:[a.jsx(ln,{isInactive:t,filter:s,children:r}),a.jsx(vr,{...e})]})}function vr({filter:e,panel:n,value:t,operator:s}){const r=Yn({defaultValues:{[e.key]:{value:t,operator:s}}}),{close:o,formId:l}=tt();return a.jsxs(Fe,{size:"xs",children:[a.jsx(Xn,{children:a.jsx(M,{...e.label})}),a.jsx(st,{padding:"px-14 pt-14 pb-4 max-h-288",children:a.jsxs(Gn,{form:r,id:l,onSubmit:i=>{o(i[e.key])},children:[e.description&&a.jsx("div",{className:"text-muted text-xs mb-14",children:a.jsx(M,{...e.description})}),n]})}),a.jsx(nt,{children:a.jsx(J,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:a.jsx(M,{message:"Apply"})})})]})}const br=h.memo(({value:e,...n})=>{const t=Qn(n);return isNaN(e)&&(e=0),a.jsx(h.Fragment,{children:t.format(e)})},Ft);function yr(e){switch(e.filter.control.type){case H.DateRangePicker:return a.jsx(wr,{...e});case H.BooleanToggle:return a.jsx(jr,{...e});case H.Select:return a.jsx(kr,{...e});case H.ChipField:return a.jsx(Cr,{...e});case H.Input:return a.jsx(Dr,{...e});case H.SelectModel:return a.jsx(Sr,{...e});case H.Custom:const n=e.filter.control.listItem;return a.jsx(n,{...e});default:return null}}function wr(e){const{value:n,filter:t}=e;let s;return n.preset!==void 0?s=a.jsx(M,{...ct[n.preset].label}):s=a.jsx(en,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),a.jsx(Ie,{...e,label:s,panel:a.jsx(Qs,{filter:t})})}function jr({filter:e,isInactive:n,onValueChange:t}){return a.jsx(ln,{onClick:()=>{t({value:e.control.defaultValue})},filter:e,isInactive:n})}function kr(e){const{filter:n,value:t}=e,s=n.control.options.find(r=>r.key===t);return a.jsx(Ie,{...e,label:s?a.jsx(M,{...s.label}):null,panel:a.jsx(Gs,{filter:n})})}function Cr(e){return a.jsx(Ie,{...e,label:a.jsx(Ir,{...e}),panel:a.jsx(gr,{filter:e.filter})})}function Ir(e){const{trans:n}=W(),{filter:t,value:s}=e,r=s.map(c=>t.control.options.find(d=>d.key===c)),o=3,l=s.length-o,i=a.jsx(h.Fragment,{children:r.filter(Boolean).slice(0,o).map((c,d)=>{let u="";return d!==0&&(u+=", "),u+=n(c.label),u})});return l>0?a.jsx(M,{message:":names + :count more",values:{names:i,count:l}}):i}function Dr(e){const{filter:n,value:t,operator:s}=e,r=s?a.jsx(M,{...on[s]}):null,o=n.control.inputType==="number"?a.jsx(br,{value:t}):t;return a.jsx(Ie,{...e,label:a.jsxs(h.Fragment,{children:[r," ",o]}),panel:a.jsx(lr,{filter:n})})}function Sr(e){const{value:n,filter:t}=e,{isLoading:s,data:r}=an(`normalized-models/${t.control.model}/${n}`,void 0,{enabled:!!n}),o=a.jsxs(h.Fragment,{children:[a.jsx(le,{variant:"avatar",size:"w-18 h-18 mr-6"}),a.jsx(le,{variant:"rect",size:"w-50"})]}),l=a.jsxs(h.Fragment,{children:[a.jsx(Ve,{size:"xs",src:r==null?void 0:r.model.image,className:"mr-6"}),r==null?void 0:r.model.name]}),i=s||!r?o:l;return a.jsx(Ie,{...e,label:i,panel:a.jsx(or,{filter:t})})}function ja({filters:e,pinnedFilters:n,className:t}){const{decodedFilters:s,remove:r,replaceAll:o}=$s(e,n);return s.length?a.jsx("div",{className:D("flex items-center gap-6 overflow-x-auto",t),children:s.map((l,i)=>{const c=e.find(u=>u.key===l.key);if(!c)return null;const d=u=>{const f=[...s];f.splice(i,1,{key:c.key,value:u.value,isInactive:!1,operator:u.operator||c.defaultOperator}),o(f)};return a.jsxs("div",{children:[!l.isInactive&&a.jsx(q,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{r(l.key)},children:a.jsx(Kt,{})}),a.jsx(yr,{filter:c,isInactive:l.isInactive,value:l.valueKey!=null?l.valueKey:l.value,operator:l.operator,onValueChange:d})]},l.key)})}):null}const ka=B(a.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),kt=B(a.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function Ze(e,n){const t=document.createElement("a");t.href=e,n&&(t.download=n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Pr(e){const n=dt(),[t,s]=h.useState(!e.value&&!e.defaultValue),r=e.onChange,[o,l]=Z(e.value||n,e.defaultValue||n,I=>{s(!1),r==null||r(I)}),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:f,setCalendarIsOpen:m,closeDialogOnSelection:g}=Gt(o,e),p=h.useCallback(()=>{s(!0),l(n),r==null||r(null),m(!1)},[n,l,r,m]),[v,b]=h.useState(()=>[be(o)]),x=h.useCallback(I=>{i&&I.compare(i)<0?I=i:c&&I.compare(c)>0&&(I=c);const T=o?o.set(I):ie(I,u);l(T),b([be(T)]),s(!1)},[l,i,c,o,u]),w=h.useCallback(I=>!t&&pe(o,I),[o,t]),k=h.useCallback(I=>({onClick:()=>{x==null||x(I),g&&(m==null||m(!1))}}),[x,m,g]);return{selectedValue:o,setSelectedValue:l,calendarIsOpen:f,setCalendarIsOpen:m,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:k,calendarDates:v,setCalendarDates:b,isPlaceholder:t,clear:p,setIsPlaceholder:s,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:g}}function Er({showCalendarFooter:e,...n}){const t=Pr(n),s=h.useRef(null),r=dt(),o=e&&a.jsx(nt,{padding:"px-14 pb-14",startAction:a.jsx(J,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:a.jsx(M,{message:"Clear"})}),children:a.jsx(J,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(r),t.setCalendarIsOpen(!1)},children:a.jsx(M,{message:"Today"})})}),l=a.jsx(rt,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:a.jsxs(Fe,{size:"auto",children:[a.jsx(st,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:a.jsx(Jt,{state:t,visibleMonths:1})}),o]})}),i={onClick:c=>{c.stopPropagation(),c.preventDefault(),Rr(c)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return a.jsxs(h.Fragment,{children:[a.jsx(ut,{ref:s,wrapperProps:i,endAdornment:a.jsx(Yt,{className:D(n.disabled&&"text-disabled")}),...n,children:a.jsx(we,{segmentProps:i,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),l]})}function Ca(e){const{min:n,max:t}=e,{trans:s}=W(),{format:r}=ce(),{field:{onChange:o,onBlur:l,value:i=null,ref:c},fieldState:{invalid:d,error:u}}=Ce({name:e.name,rules:{validate:g=>{if(!g)return;const p=Pe(g);if(n&&p.compare(n)<0)return s({message:"Enter a date after :date",values:{date:r(g)}});if(t&&p.compare(t)>0)return s({message:"Enter a date before :date",values:{date:r(g)}})}}}),f=i?Pe(i):null,m={onChange:g=>{o(g&&g.toAbsoluteString())},onBlur:l,value:f,invalid:d,errorMessage:u==null?void 0:u.message,inputRef:c};return a.jsx(Er,{...se(m,e)})}function Rr(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const Ia=B(a.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Q=new Map,De=new Map,Tr=new Map,K={status:"inactive"};function qe({e,rect:n,deltaX:t,deltaY:s}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:s??0,nativeEvent:e}}let cn=null;function Ct(e){cn=e}function Nr(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function zr(e){const n=new IntersectionObserver(t=>{t.forEach(s=>{const{width:r,height:o,left:l,top:i}=s.boundingClientRect,[c,d]=[...e].find(([,f])=>f.ref.current===s.target)||[];if(c==null||d==null)return;const u={width:r,height:o,left:l,top:i};e.set(c,{...d,rect:u})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function Da({id:e,disabled:n,ref:t,preview:s,hidePreview:r,...o}){const l=h.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:c}=Lt(),d=h.useRef({lastPosition:{x:0,y:0}}).current,u=h.useRef(o);u.current=o,h.useLayoutEffect(()=>(n?Q.delete(e):Q.set(e,{...Q.get(e),id:e,ref:t,type:u.current.type,getData:u.current.getData}),()=>{Q.delete(e)}),[e,n,u,t]);const f=b=>{Tr.forEach(x=>{var w;x.type===((w=Q.get(e))==null?void 0:w.type)&&b(x)})},m=b=>{var T,z;const x=Q.get(e),w=t.current,k=!l.current||!d.clickedEl||l.current.contains(d.clickedEl);if(cn||!w||!x||!k){b.preventDefault(),b.stopPropagation();return}zr(De),Ct("drag"),r&&$r(b),b.dataTransfer.effectAllowed="move",d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=Nr(w.getBoundingClientRect());const I=qe({rect:d.currentRect,e:b});s!=null&&s.current&&s.current(x,y=>{b.dataTransfer.setDragImage(y,0,0)}),K.status="dragging",K.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(z=(T=u.current).onDragStart)==null||z.call(T,I,x),requestAnimationFrame(()=>{f(y=>{var S;return(S=y.onDragStart)==null?void 0:S.call(y,I,x)})}),i(window,"dragover",g,!0)},g=b=>{var z,y;if(b.preventDefault(),!d.currentRect)return;const x=b.clientX-d.lastPosition.x,w=b.clientY-d.lastPosition.y,k={...d.currentRect,left:d.currentRect.left+x,top:d.currentRect.top+w},I=qe({rect:k,e:b,deltaX:x,deltaY:w}),T=Q.get(e);T&&((y=(z=u.current).onDragMove)==null||y.call(z,I,T),f(S=>{var R;return(R=S.onDragMove)==null?void 0:R.call(S,I,T)})),d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=k};return{draggableProps:{draggable:!n,onDragStart:m,onDragEnd:b=>{var k,I;if(c(),!d.currentRect)return;Ct(null),oe&&oe.remove();const x=qe({rect:d.currentRect,e:b}),w=Q.get(e);w&&((I=(k=u.current).onDragEnd)==null||I.call(k,x,w),f(T=>{var z;return(z=T.onDragEnd)==null?void 0:z.call(T,x,w,K.status)})),requestAnimationFrame(()=>{K.dragTargetId=void 0,K.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:b=>{d.clickedEl=b.target}},dragHandleRef:l}}let oe;function $r(e){oe||(oe=new Image,document.body.append(oe),oe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(oe,0,0)}async function*Mr(e){const n=[];for(const t of e.items)if(t.kind==="file"){const s=t.webkitGetAsEntry();s&&n.push(s)}for(const t of n)if(t.isFile){if(t.name===".DS_Store")continue;const s=await dn(t);yield new qt(s,t.fullPath)}else t.isDirectory&&(yield*un(t))}async function*un(e){const n=e.createReader();let t;do{t=await new Promise((s,r)=>{n.readEntries(s,r)});for(const s of t)if(s.isFile){if(s.name===".DS_Store")continue;const r=await dn(s);yield new qt(r,s.fullPath)}else s.isDirectory&&(yield*un(s))}while(t.length>0)}function dn(e){return new Promise((n,t)=>e.file(n,t))}async function Fr(e){const n=[];for await(const t of e)n.push(t);return n}const Or=400;function Sa({id:e,disabled:n,ref:t,...s}){const r=h.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=h.useRef(s);o.current=s,h.useLayoutEffect(()=>(De.set(e,{...De.get(e),disabled:n,id:e,ref:t}),()=>{De.delete(e)}),[e,o,n,t]);const l=m=>{var v;const g=o.current,p=g.allowDragEventsFromItself||t.current!==((v=m.ref)==null?void 0:v.current);return!!(m!=null&&m.type&&p&&g.types.includes(m.type)&&(!g.acceptsDrop||g.acceptsDrop(m)))},i=m=>{var p,v;const g=ge(m);g&&((v=(p=o.current).onDragLeave)==null||v.call(p,g))};return{droppableProps:n?{}:{onDragOver:m=>{var p,v;m.preventDefault(),m.stopPropagation();const g=ge(m);g&&l(g)&&((v=(p=o.current).onDragOver)==null||v.call(p,g,m))},onDragEnter:m=>{var p,v;if(m.stopPropagation(),r.dragOverElements.add(m.target),r.dragOverElements.size>1)return;const g=ge(m);g&&l(g)&&((v=(p=o.current).onDragEnter)==null||v.call(p,g),clearTimeout(r.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(r.dropActivateTimer=setTimeout(()=>{var b,x;g&&((x=(b=o.current).onDropActivate)==null||x.call(b,g))},Or)))},onDragLeave:m=>{m.stopPropagation(),r.dragOverElements.delete(m.target);for(const p of r.dragOverElements)m.currentTarget.contains(p)||r.dragOverElements.delete(p);if(r.dragOverElements.size>0)return;const g=ge(m);g&&l(g)&&(i(m),clearTimeout(r.dropActivateTimer))},onDrop:async m=>{var p,v,b,x;m.preventDefault(),m.stopPropagation(),r.dragOverElements.clear(),i(m),clearTimeout(r.dropActivateTimer);const g=ge(m);if(g)if((v=(p=o.current).onDragLeave)==null||v.call(p,g),!l(g))K.status!=="inactive"&&(K.status="dropFail");else{const w=(x=(b=o.current).onDrop)==null?void 0:x.call(b,g);K.status!=="inactive"&&(K.status=w===!1?"dropFail":"dropSuccess")}}}}}function ge(e){if(K.dragTargetId!=null)return Q.get(K.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Fr(Mr(e.dataTransfer))}}const Ar="user",Pa=B(a.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),Ea=B(a.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Re.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Te.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fe(e,n,t){var s,r=(s=t.initialDeps)!=null?s:[],o;return function(){var l;t.key&&t.debug!=null&&t.debug()&&(l=Date.now());var i=e(),c=i.length!==r.length||i.some(function(p,v){return r[v]!==p});if(!c)return o;r=i;var d;if(t.key&&t.debug!=null&&t.debug()&&(d=Date.now()),o=n.apply(void 0,i),t.key&&t.debug!=null&&t.debug()){var u=Math.round((Date.now()-l)*100)/100,f=Math.round((Date.now()-d)*100)/100,m=f/16,g=function(v,b){for(v=String(v);v.length<b;)v=" "+v;return v};console.info("%c "+g(f,5)+" /"+g(u,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*m,120))+"deg 100% 31%);",t==null?void 0:t.key)}return t==null||t.onChange==null||t.onChange(o),o}}function We(e,n){if(e===void 0)throw new Error("Unexpected undefined"+(n?": "+n:""));return e}var Vr=function(n,t){return Math.abs(n-t)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Lr=function(n){return n},Hr=function(n){for(var t=Math.max(n.startIndex-n.overscan,0),s=Math.min(n.endIndex+n.overscan,n.count-1),r=[],o=t;o<=s;o++)r.push(o);return r},Br=function(n,t){var s=n.scrollElement;if(s){var r=function(i){var c=i.width,d=i.height;t({width:Math.round(c),height:Math.round(d)})};r(s.getBoundingClientRect());var o=new ResizeObserver(function(l){var i=l[0];if(i!=null&&i.borderBoxSize){var c=i.borderBoxSize[0];if(c){r({width:c.inlineSize,height:c.blockSize});return}}r(s.getBoundingClientRect())});return o.observe(s,{box:"border-box"}),function(){o.unobserve(s)}}},Ur=function(n,t){var s=n.scrollElement;if(s){var r=function(){t(s[n.options.horizontal?"scrollLeft":"scrollTop"])};return r(),s.addEventListener("scroll",r,{passive:!0}),function(){s.removeEventListener("scroll",r)}}},_r=function(n,t,s){if(t!=null&&t.borderBoxSize){var r=t.borderBoxSize[0];if(r){var o=Math.round(r[s.options.horizontal?"inlineSize":"blockSize"]);return o}}return Math.round(n.getBoundingClientRect()[s.options.horizontal?"width":"height"])},Kr=function(n,t,s){var r,o,l=t.adjustments,i=l===void 0?0:l,c=t.behavior,d=n+i;(r=s.scrollElement)==null||r.scrollTo==null||r.scrollTo((o={},o[s.options.horizontal?"left":"top"]=d,o.behavior=c,o))},qr=function(n){var t=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var s=null,r=function(){return s||(typeof ResizeObserver<"u"?s=new ResizeObserver(function(l){l.forEach(function(i){t._measureElement(i.target,i)})}):null)};return{disconnect:function(){var l;return(l=r())==null?void 0:l.disconnect()},observe:function(l){var i;return(i=r())==null?void 0:i.observe(l,{box:"border-box"})},unobserve:function(l){var i;return(i=r())==null?void 0:i.unobserve(l)}}}(),this.range=null,this.setOptions=function(s){Object.entries(s).forEach(function(r){var o=r[0],l=r[1];typeof l>"u"&&delete s[o]}),t.options=Te({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Lr,rangeExtractor:Hr,onChange:function(){},measureElement:_r,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},s)},this.notify=function(s){t.options.onChange==null||t.options.onChange(t,s)},this.maybeNotify=fe(function(){return t.calculateRange(),[t.isScrolling,t.range?t.range.startIndex:null,t.range?t.range.endIndex:null]},function(s){t.notify(s)},{key:!1,debug:function(){return t.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){t.unsubs.filter(Boolean).forEach(function(s){return s()}),t.unsubs=[],t.scrollElement=null},this._didMount=function(){return t.measureElementCache.forEach(t.observer.observe),function(){t.observer.disconnect(),t.cleanup()}},this._willUpdate=function(){var s=t.options.getScrollElement();t.scrollElement!==s&&(t.cleanup(),t.scrollElement=s,t._scrollToOffset(t.scrollOffset,{adjustments:void 0,behavior:void 0}),t.unsubs.push(t.options.observeElementRect(t,function(r){t.scrollRect=r,t.maybeNotify()})),t.unsubs.push(t.options.observeElementOffset(t,function(r){t.scrollAdjustments=0,t.scrollOffset!==r&&(t.isScrollingTimeoutId!==null&&(clearTimeout(t.isScrollingTimeoutId),t.isScrollingTimeoutId=null),t.isScrolling=!0,t.scrollDirection=t.scrollOffset<r?"forward":"backward",t.scrollOffset=r,t.maybeNotify(),t.isScrollingTimeoutId=setTimeout(function(){t.isScrollingTimeoutId=null,t.isScrolling=!1,t.scrollDirection=null,t.maybeNotify()},t.options.scrollingDelay))})))},this.getSize=function(){return t.scrollRect[t.options.horizontal?"width":"height"]},this.memoOptions=fe(function(){return[t.options.count,t.options.paddingStart,t.options.scrollMargin,t.options.getItemKey]},function(s,r,o,l){return t.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:r,scrollMargin:o,getItemKey:l}},{key:!1}),this.getFurthestMeasurement=function(s,r){for(var o=new Map,l=new Map,i=r-1;i>=0;i--){var c=s[i];if(!o.has(c.lane)){var d=l.get(c.lane);if(d==null||c.end>d.end?l.set(c.lane,c):c.end<d.end&&o.set(c.lane,!0),o.size===t.options.lanes)break}}return l.size===t.options.lanes?Array.from(l.values()).sort(function(u,f){return u.end-f.end})[0]:void 0},this.getMeasurements=fe(function(){return[t.memoOptions(),t.itemSizeCache]},function(s,r){var o=s.count,l=s.paddingStart,i=s.scrollMargin,c=s.getItemKey,d=t.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,t.pendingMeasuredCacheIndexes):0;t.pendingMeasuredCacheIndexes=[];for(var u=t.measurementsCache.slice(0,d),f=d;f<o;f++){var m=c(f),g=t.options.lanes===1?u[f-1]:t.getFurthestMeasurement(u,f),p=g?g.end:l+i,v=r.get(m),b=typeof v=="number"?v:t.options.estimateSize(f),x=p+b,w=g?g.lane:f%t.options.lanes;u[f]={index:f,start:p,size:b,end:x,key:m,lane:w}}return t.measurementsCache=u,u},{key:!1,debug:function(){return t.options.debug}}),this.calculateRange=fe(function(){return[t.getMeasurements(),t.getSize(),t.scrollOffset]},function(s,r,o){return t.range=s.length>0&&r>0?Wr({measurements:s,outerSize:r,scrollOffset:o}):null},{key:!1,debug:function(){return t.options.debug}}),this.getIndexes=fe(function(){return[t.options.rangeExtractor,t.calculateRange(),t.options.overscan,t.options.count]},function(s,r,o,l){return r===null?[]:s(Te({},r,{overscan:o,count:l}))},{key:!1,debug:function(){return t.options.debug}}),this.indexFromElement=function(s){var r=t.options.indexAttribute,o=s.getAttribute(r);return o?parseInt(o,10):(console.warn("Missing attribute name '"+r+"={index}' on measured element."),-1)},this._measureElement=function(s,r){var o=t.measurementsCache[t.indexFromElement(s)];if(!o||!s.isConnected){t.measureElementCache.forEach(function(c,d){c===s&&(t.observer.unobserve(s),t.measureElementCache.delete(d))});return}var l=t.measureElementCache.get(o.key);l!==s&&(l&&t.observer.unobserve(l),t.observer.observe(s),t.measureElementCache.set(o.key,s));var i=t.options.measureElement(s,r,t);t.resizeItem(o,i)},this.resizeItem=function(s,r){var o,l=(o=t.itemSizeCache.get(s.key))!=null?o:s.size,i=r-l;i!==0&&(s.start<t.scrollOffset&&t._scrollToOffset(t.scrollOffset,{adjustments:t.scrollAdjustments+=i,behavior:void 0}),t.pendingMeasuredCacheIndexes.push(s.index),t.itemSizeCache=new Map(t.itemSizeCache.set(s.key,r)),t.notify(!1))},this.measureElement=function(s){s&&t._measureElement(s,void 0)},this.getVirtualItems=fe(function(){return[t.getIndexes(),t.getMeasurements()]},function(s,r){for(var o=[],l=0,i=s.length;l<i;l++){var c=s[l],d=r[c];o.push(d)}return o},{key:!1,debug:function(){return t.options.debug}}),this.getVirtualItemForOffset=function(s){var r=t.getMeasurements();return We(r[fn(0,r.length-1,function(o){return We(r[o]).start},s)])},this.getOffsetForAlignment=function(s,r){var o=t.getSize();r==="auto"&&(s<=t.scrollOffset?r="start":s>=t.scrollOffset+o?r="end":r="start"),r==="start"?s=s:r==="end"?s=s-o:r==="center"&&(s=s-o/2);var l=t.options.horizontal?"scrollWidth":"scrollHeight",i=t.scrollElement?"document"in t.scrollElement?t.scrollElement.document.documentElement[l]:t.scrollElement[l]:0,c=i-t.getSize();return Math.max(Math.min(c,s),0)},this.getOffsetForIndex=function(s,r){r===void 0&&(r="auto"),s=Math.max(0,Math.min(s,t.options.count-1));var o=We(t.getMeasurements()[s]);if(r==="auto")if(o.end>=t.scrollOffset+t.getSize()-t.options.scrollPaddingEnd)r="end";else if(o.start<=t.scrollOffset+t.options.scrollPaddingStart)r="start";else return[t.scrollOffset,r];var l=r==="end"?o.end+t.options.scrollPaddingEnd:o.start-t.options.scrollPaddingStart;return[t.getOffsetForAlignment(l,r),r]},this.isDynamicMode=function(){return t.measureElementCache.size>0},this.cancelScrollToIndex=function(){t.scrollToIndexTimeoutId!==null&&(clearTimeout(t.scrollToIndexTimeoutId),t.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(s,r){var o=r===void 0?{}:r,l=o.align,i=l===void 0?"start":l,c=o.behavior;t.cancelScrollToIndex(),c==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:c})},this.scrollToIndex=function(s,r){var o=r===void 0?{}:r,l=o.align,i=l===void 0?"auto":l,c=o.behavior;s=Math.max(0,Math.min(s,t.options.count-1)),t.cancelScrollToIndex(),c==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var d=t.getOffsetForIndex(s,i),u=d[0],f=d[1];t._scrollToOffset(u,{adjustments:void 0,behavior:c}),c!=="smooth"&&t.isDynamicMode()&&(t.scrollToIndexTimeoutId=setTimeout(function(){t.scrollToIndexTimeoutId=null;var m=t.measureElementCache.has(t.options.getItemKey(s));if(m){var g=t.getOffsetForIndex(s,f),p=g[0];Vr(p,t.scrollOffset)||t.scrollToIndex(s,{align:f,behavior:c})}else t.scrollToIndex(s,{align:f,behavior:c})}))},this.scrollBy=function(s,r){var o=r===void 0?{}:r,l=o.behavior;t.cancelScrollToIndex(),l==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.scrollOffset+s,{adjustments:void 0,behavior:l})},this.getTotalSize=function(){var s;return(((s=t.getMeasurements()[t.options.count-1])==null?void 0:s.end)||t.options.paddingStart)-t.options.scrollMargin+t.options.paddingEnd},this._scrollToOffset=function(s,r){var o=r.adjustments,l=r.behavior;t.options.scrollToFn(s,{behavior:l,adjustments:o},t)},this.measure=function(){t.itemSizeCache=new Map,t.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(s){t.itemSizeCache.set(s.key,s.size)}),this.maybeNotify()},fn=function(n,t,s,r){for(;n<=t;){var o=(n+t)/2|0,l=s(o);if(l<r)n=o+1;else if(l>r)t=o-1;else return o}return n>0?n-1:0};function Wr(e){for(var n=e.measurements,t=e.outerSize,s=e.scrollOffset,r=n.length-1,o=function(d){return n[d].start},l=fn(0,r,o,s),i=l;i<r&&n[i].end<s+t;)i++;return{startIndex:l,endIndex:i}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Yr=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Xr(e){var n=h.useReducer(function(){return{}},{})[1],t=Re({},e,{onChange:function(l,i){i?Zn.flushSync(n):n(),e.onChange==null||e.onChange(l,i)}}),s=h.useState(function(){return new qr(t)}),r=s[0];return r.setOptions(t),h.useEffect(function(){return r._didMount()},[]),Yr(function(){return r._willUpdate()}),r}function Ra(e){return Xr(Re({observeElementRect:Br,observeElementOffset:Ur,scrollToFn:Kr},e))}const Gr=he.createContext(null);function te(e,n){const{base_url:t}=Mt(),s=h.useContext(Gr);return h.useMemo(()=>{if(!e)return{};let r;e.url&&(r=Jn(e.url)?e.url:`${t}/${e.url}`);const o={previewUrl:r,downloadUrl:`${t}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||e.hash}`};return s&&(o.previewUrl&&(o.previewUrl=It(o.previewUrl,{...s,thumbnail:n!=null&&n.thumbnail?"true":""},t)),o.downloadUrl=It(o.downloadUrl,s,t)),o},[t,e,n==null?void 0:n.downloadHashes,n==null?void 0:n.thumbnail,s])}function It(e,n,t){const s=new URL(e,t);return Object.entries(n).forEach(([r,o])=>{s.searchParams.append(r,o)}),s.toString()}const ft=he.createContext(null);function ee({message:e,className:n,allowDownload:t}){const{entries:s,activeIndex:r}=h.useContext(ft),o=s[r],l=e||a.jsx(M,{message:"No file preview available"}),{downloadUrl:i}=te(o);return a.jsxs("div",{className:D(n,"shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded"),children:[a.jsx("div",{className:"text-lg",children:l}),t&&a.jsx("div",{className:"block mt-20 text-center",children:a.jsx(J,{variant:"flat",color:"primary",onClick:()=>{i&&Ze(i)},children:a.jsx(M,{message:"Download"})})})]})}function Qr(e){const{entry:n,className:t}=e,{trans:s}=W(),{previewUrl:r}=te(n);return r?a.jsx("img",{className:D(t,"shadow"),src:r,alt:s({message:"Preview for :name",values:{name:n.name}})}):a.jsx(ee,{...e})}const Zr=5242880;function Jr(e){const{entry:n,className:t}=e,{trans:s}=W(),[r,o]=h.useState(!1),[l,i]=h.useState(!0),[c,d]=h.useState(!1),[u,f]=h.useState(null),{previewUrl:m}=te(n);return h.useEffect(()=>{n&&(m?n.file_size>=Zr?(o(!0),i(!1)):ea(m).then(g=>{f(g.data)}).catch(()=>{d(!0)}).finally(()=>{i(!1)}):d(!0))},[n,m]),l?a.jsx(ot,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):r?a.jsx(ee,{...e,message:a.jsx(M,{message:"This file is too large to preview."})}):c?a.jsx(ee,{...e,message:a.jsx(M,{message:"There was an issue previewing this file"})}):a.jsx("pre",{className:D("rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full",t),children:a.jsx("div",{className:"container mx-auto",children:`${u}`})})}function ea(e){return Ae.get(e,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function ta(e){const{entry:n,className:t}=e,{previewUrl:s}=te(n),r=h.useRef(null),[o,l]=h.useState(!1);return h.useEffect(()=>{var i;l(!((i=r.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!s?a.jsx(ee,{...e}):a.jsx("video",{className:t,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:a.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function na(e){const{entry:n,className:t}=e,{previewUrl:s}=te(n),r=h.useRef(null),[o,l]=h.useState(!1);return h.useEffect(()=>{var i;l(!((i=r.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!s?a.jsx(ee,{...e}):a.jsx("audio",{className:t,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:a.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function sa(e){const{entry:n,className:t}=e,{trans:s}=W(),{previewUrl:r}=te(n);return r?a.jsx("iframe",{title:s({message:"Preview for :name",values:{name:n.name}}),className:D(t,"w-full h-full"),src:`${r}#toolbar=0`}):a.jsx(ee,{...e})}function Ye(e){const{entry:n,className:t}=e,{trans:s}=W(),r=h.useRef(null),[o,l]=h.useState(!1),i=h.useRef(),[c,d]=h.useState(!1),{previewUrl:u}=te(n);return h.useEffect(()=>{u?n.file_size&&n.file_size>25e6?l(!0):r.current&&(r.current.onload=()=>{clearTimeout(i.current),d(!1)},ra(u,n).then(f=>{r.current&&(r.current.src=f)}),i.current=setTimeout(()=>{l(!0)},5e3)):l(!0)},[n,u]),o?a.jsx(ee,{...e}):a.jsxs("div",{className:D(t,"w-full h-full"),children:[c&&a.jsx(ot,{}),a.jsx("iframe",{ref:r,title:s({message:"Preview for :name",values:{name:n.name}}),className:D("w-full h-full",c&&"hidden")})]})}async function ra(e,n){const t=new URL(e);if(!t.searchParams.has("shareable_link")){const{data:s}=await Ae.post(`file-entries/${n.id}/add-preview-token`);t.searchParams.append("preview_token",s.preview_token)}return aa(t)}function aa(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const Dt={text:Jr,video:ta,audio:na,image:Qr,pdf:sa,spreadsheet:Ye,powerPoint:Ye,word:Ye,"text/rtf":ee};function oa(e){const n=e==null?void 0:e.mime,t=e==null?void 0:e.type;return Dt[n]||Dt[t]||ee}const la=B(a.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined"),ia=2*1024*1024;function ca({file:e,className:n,iconClassName:t,showImage:s=!0}){const{trans:r}=W(),{previewUrl:o}=te(e,{thumbnail:!0});if(e.file_size&&e.file_size>ia&&!e.thumbnail&&(s=!1),s&&e.type==="image"&&o){const l=r({message:":fileName thumbnail",values:{fileName:e.name}});return a.jsx("img",{className:D(n,"object-cover"),src:o,alt:l,draggable:!1})}return a.jsx(es,{className:t,type:e.type})}function ua({entries:e,onClose:n,showHeader:t=!0,className:s,headerActionsLeft:r,allowDownload:o=!0,...l}){const i=Je("(max-width: 1024px)"),[c,d]=Z(l.activeIndex,l.defaultActiveIndex||0,l.onActiveIndexChange),u=e[c],f=h.useMemo(()=>({entries:e,activeIndex:c}),[e,c]),m=oa(u);if(!u)return n==null||n(),null;const g=e.length-1>c,p=()=>{d(c+1)},v=c>0,b=()=>{d(c-1)};return a.jsxs(ft.Provider,{value:f,children:[t&&a.jsx(da,{actionsLeft:r,isMobile:i,onClose:n,onNext:g?p:void 0,onPrevious:v?b:void 0,allowDownload:o}),a.jsxs("div",{className:D("overflow-hidden relative flex-auto",s),children:[i&&a.jsx(q,{size:"lg",className:"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!v,onClick:b,children:a.jsx($t,{})}),a.jsx(je,{initial:!1,children:a.jsx(ue.div,{className:"absolute inset-0 flex items-center justify-center",...at,children:a.jsx(m,{className:"max-h-[calc(100%-30px)]",entry:u,allowDownload:o})},u.id)}),i&&a.jsx(q,{size:"lg",className:"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!g,onClick:p,children:a.jsx(Zt,{})})]})]})}function da({onNext:e,onPrevious:n,onClose:t,isMobile:s,actionsLeft:r,allowDownload:o}){const{entries:l,activeIndex:i}=h.useContext(ft),c=l[i],{downloadUrl:d}=te(c),m=s?a.jsx(q,{onClick:()=>{d&&Ze(d)},children:a.jsx(kt,{})}):a.jsx(J,{startIcon:a.jsx(kt,{}),variant:"text",onClick:()=>{d&&Ze(d)},children:a.jsx(M,{message:"Download"})});return a.jsxs("div",{className:"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted",children:[a.jsxs("div",{className:"flex items-center gap-4 w-1/3 justify-start",children:[r,o?m:void 0]}),a.jsxs("div",{className:"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main",children:[a.jsx(ca,{file:c,iconClassName:"w-16 h-16",showImage:!1}),a.jsx("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:c.name})]}),a.jsxs("div",{className:"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap",children:[!s&&a.jsxs(h.Fragment,{children:[a.jsx(q,{disabled:!n,onClick:n,children:a.jsx(la,{})}),a.jsx("div",{children:i+1}),a.jsx("div",{children:"/"}),a.jsx("div",{children:l.length}),a.jsx(q,{disabled:!e,onClick:e,children:a.jsx(ns,{})}),a.jsx("div",{className:"bg-divider w-1 h-24 mx-20"})]}),a.jsx(q,{radius:"rounded-none",onClick:t,children:a.jsx(Kt,{})})]})]})}function Ta(e){return a.jsx(Fe,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:a.jsx(fa,{...e})})}function fa(e){const{close:n}=tt();return a.jsx(ua,{onClose:n,...e})}const ha={key:"type",label:C("Type"),description:C("Type of the file"),defaultOperator:ye.eq,control:{type:H.Select,defaultValue:"05",options:[{key:"02",label:C("Text"),value:"text"},{key:"03",label:C("Audio"),value:"audio"},{key:"04",label:C("Video"),value:"video"},{key:"05",label:C("Image"),value:"image"},{key:"06",label:C("PDF"),value:"pdf"},{key:"07",label:C("Spreadsheet"),value:"spreadsheet"},{key:"08",label:C("Word Document"),value:"word"},{key:"09",label:C("Photoshop"),value:"photoshop"},{key:"10",label:C("Archive"),value:"archive"},{key:"11",label:C("Folder"),value:"folder"}]}},Na=[ha,{key:"public",label:C("Visibility"),description:C("Whether file is publicly accessible"),defaultOperator:ye.eq,control:{type:H.Select,defaultValue:"01",options:[{key:"01",label:C("Private"),value:!1},{key:"02",label:C("Public"),value:!0}]}},Es({description:C("Date file was uploaded")}),Rs({description:C("Date file was last changed")}),{key:"owner_id",label:C("Uploader"),description:C("User that this file was uploaded by"),defaultOperator:ye.eq,control:{type:H.SelectModel,model:Ar}}],za=B(a.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),$a=B(a.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");export{it as $,ka as A,Ke as B,gr as C,pa as D,Js as E,ye as F,Na as G,Ta as H,lr as I,sn as J,Zt as K,Pa as L,Ea as M,or as N,ar as O,za as P,br as Q,$a as R,Gs as S,wa as T,Ar as U,te as V,ca as W,X,ua as Y,Gr as Z,ha as _,ba as a,cn as a0,Vs as a1,Ee as a2,Tr as a3,Yt as a4,en as a5,is as a6,ws as a7,ks as a8,ct as a9,qs as aa,Qt as ab,la as ac,as as ad,va as b,xa as c,H as d,Es as e,$s as f,Qs as g,ja as h,Ze as i,kt as j,Ve as k,Ca as l,ya as m,ir as n,As as o,tn as p,mr as q,De as r,Da as s,Sa as t,Rs as u,zr as v,Ia as w,hr as x,dt as y,Ra as z};
//# sourceMappingURL=Info-c96799af.js.map
